<html>

<head>
    <title>~</title>
    <META http-equiv="Content-Type" content="text/html;" charset="UTF-8">
    <base target="_blank" />
    <META name="viewport" content="width=device-witdh, initial-scale=1, maximum-scale=1, user-scale=0">

    <!-------------------------------------------->
    <!---- Insert this before scripts import; then restor back later -->
    <script>//if (typeof module === 'object') { window.module = module; module = undefined; }</script>

    <!-------------- jq --------------------->
    <script ____src="./doc_files/jquery-2_1_3.min.js"></script>
    <script src="https://wdingbox.github.io/ham12/jq/jquery-2_1_3.min.js"></script>
    <script xxxxxxxsrc="http://localhost:7878/assets/ckeditor/adapters/jq/jquery-2_1_3.min.js"
        note="selfseversite"></script>
    <!-------------- ckeditor only--------------------->
    <script src="../../../assets/ckeditor/ckeditor.js"></script>
    <script src="../../../assets/ckeditor/samples/old/sample.js"></script>
    <link href="../../../assets/ckeditor/samples/old/sample.css" rel="stylesheet">


    <script ___src="http://localhost:7878/assets/ckeditor/ckeditor.js" note="selfseversite"></script>
    <script ___src="http://localhost:7878/assets/ckeditor/samples/old/sample.js"></script>
    <!-------------------------------------------->
    <script src="./js/BsnpRestApi.js"></script>
    <script src="./js/BsnpRestConst.js"></script>
    <script src="./js/UtiLib.js"></script>
    <script src="./js/PageUti.js"></script>
    <script src="./js/MyStorage.js"></script>
    <script language="javascript" src="./BibleStudyNotePad.js?v=20.12.4"></script>

    <script language="javascript"
        src="https://wdingbox.github.io/bible_obj_lib/jsdb/jsBibleStruct/All_Max_struct_json.js"></script>
    <script src="https://bsnpghrepolist.github.io/admin/account/myoj/e_Note_json.js"></script>
    <!----- Insert this line after script imports -->
    <script>//if (window.module) module = window.module;</script>
    <!-------------------------------------------->
    <style>
        #ctrpanel {
            z-index: 999999;
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: antiquewhite;
        }

        #input,
        #output {
            background-color: black;
            color: white;
            overflow: auto
        }


        #idbtn_exec_cmd {
            background-color: grey;
        }

        .white_space_nowrap {
            white-space: nowrap;
        }

        .editorinfo {
            background-color: lightblue;
            display: inline-block;
            white-space: nowrap;
            width: 100%;
        }

        .minitxt {
            float: left;
            white-space: nowrap;
        }

        .minicon {
            float: right;

            white-space: nowrap;
        }

        .scorenum {
            float: right;
            white-space: nowrap;
        }
    </style>
</head>

<body onbeforeunload="return 'leave?';">
    <div id="ctrpanel">
        <a id="usrname">usrname</a>
    </div>






    <h></h><input id="inpBCV" placeholder="Fellowship Group ID"></input> <button id="runCmd">Search</button>
    <div id="account_history"></div>

    <table border="1">
        <caption id="scap"></caption>
        <tbody id="allusrs">

        </tbody>
    </table>





    <script>


    </script>
</body>

</html>
<script>
    if ("undefined" === typeof localStorage) {
        alert("localStorage not supported")
    }
</script>
<script>
    function getvrs(bcv, objSrc) {
        var retOj = Uti.parse_bcv(bcv, "")
        Uti.FetchObj_UntilEnd(retOj.bcvObj, objSrc)
        var str = retOj.get_vrs()
        return str
    }
    function jster_obj(usrname) {
        var urls=`https://bsnpghrepolist.github.io/${usrname}/myoj/e_Note_json.js`
        var scst="<"+"script " + "src=\'" +urls+ "\'/>"
        $("head").append(scst)
        console.log(urls)
    }
    $(function () {
        var urls = window.location.href;
        var param = new URLSearchParams(urls)
        $("#usrname").text(param.get("SSID").slice(13))
        var bcv = param.get("BCV")
        $("#inpBCV").val(bcv)

        var str = getvrs(bcv, e_Note_json)

        var ary = str.split(",")

        var slst = ""
        ary.forEach(function (key, i) {
            slst += `<tr><td>${i}</td><td><span class='usrname'><button>${key}</button><a>+</a></span>
                <div>..</div></td></tr>`
        })

        $("#allusrs").html(slst)
        $(".usrname").on("click", function () {
            var ret = jster_obj($(this).text())
            var str = getvrs(bcv, obj)
            $(this).next().html(str)

        })

        //var txt = 
        //init_CKEditor()
        //init_ui_cmd()
        var search_reposdesc = MyStorage.MostRecentAryInStore("inpBCV")
        $("#inpBCV").on("focus", function () {
            search_reposdesc.gen_history_table("#account_history", function (s) {
                $("#inpBCV").val(s)
            })
        })

        var api = new BsnpRestApi()
        var retOj = Uti.parse_bcv(bcv, "")
        var par = {fnames:["e_Note"]}
        par.inpOjb = retOj.bcvObj
        api.ApiBibleObj_read_crossnetwork_BkcChpVrs_txt(par,function(rob){
            console.log(rob)
        })



    })
</script>